import{r as n,j as e,b as y}from"./app-D9cWeyPu.js";import{B as b}from"./ButtonComponent-BR8rAYxb.js";import{M as w}from"./ModalComponent-CHYyHx2a.js";import{F as N}from"./ArrowLeftIcon-ByIlWwAh.js";const M=({email:d})=>{const[a,f]=n.useState(["","","",""]),[i,l]=n.useState(""),[u,m]=n.useState(!0),[x,p]=n.useState(""),c=n.useRef([]);n.useEffect(()=>{c.current[0]&&c.current[0].focus()},[]);const h=async r=>{r.preventDefault();const t=document.head.querySelector('meta[name="csrf-token"]').content,s=a.join("");try{const o=await y.post("/register/otp/verify",{email:d,otp:s},{headers:{"X-CSRF-TOKEN":t}});p("OTP verification successful! Redirecting..."),m(!1),setTimeout(()=>{window.location.href=route("auth")},2e3)}catch(o){o.response&&o.response.data.message?l(o.response.data.message):l("An unexpected error occurred. Please try again.")}},g=(r,t)=>{if(t.length<=1&&/^\d*$/.test(t)){const s=[...a];if(s[r]=t,f(s),t&&r<3){const o=document.querySelector(`input[name="code-${r+1}"]`);o==null||o.focus()}}},j=(r,t)=>{if(t.key==="Backspace"&&!a[r]&&r>0){const s=document.querySelector(`input[name="code-${r-1}"]`);s==null||s.focus()}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"lg:flex lg:justify-center",children:e.jsxs("div",{className:"flex flex-col min-h-screen bg-primary lg:w-[400px]",children:[e.jsx("div",{className:"  flex-none flex justify-center px-4 py-20",children:e.jsx("img",{src:"/TripInLogo.svg",className:"w-36 object-contain",alt:"Logo of TripIn"})}),e.jsx("div",{className:"flex-grow bg-white rounded-t-md p-6",children:e.jsxs("div",{className:"max-w-md mx-auto p-2",children:[e.jsx("h1",{className:"text-2xl font-semibold text-black mb-2",children:"Verification Code"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"We have sent the verification code to your email address"}),e.jsxs("form",{onSubmit:h,children:[e.jsx("div",{className:"flex justify-between gap-3 mb-8",children:a.map((r,t)=>e.jsx("input",{ref:s=>c.current[t]=s,type:"text",inputMode:"numeric",name:`code-${t}`,value:r,onChange:s=>g(t,s.target.value),onKeyDown:s=>j(t,s),className:`w-16 h-16 border-2 border-gray-200 rounded-xl
                            text-center bg-transparent text-xl text-black
                            font-semibold focus:border-gray-400 focus:outline-none
                            transition-colors`,maxLength:1},t))}),i&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:i}),e.jsx(b,{buttonText:"confirm"}),e.jsxs("div",{className:"absolute cursor-pointer  p-2 w-fit bottom-20 -translate-y-1/2 left-1/2 -translate-x-1/2 flex justify-center gap-1 bg-white items-center  rounded-md",onClick:()=>history.back(),children:[e.jsx(N,{className:"size-4 cursor-pointer text-primary2"}),e.jsx("p",{className:"text-primary2 text-sm",children:"go back to sign up"})]})]})]})}),e.jsx(w,{isModalHidden:u,setIsModalHidden:m,children:e.jsxs("div",{className:"w-[225px] h-[145px] flex flex-col items-center justify-center",children:[e.jsx("img",{src:"/success.svg"}),e.jsx("p",{className:"text-sm font-normal text-center",children:x})]})})]})})})};export{M as default};
